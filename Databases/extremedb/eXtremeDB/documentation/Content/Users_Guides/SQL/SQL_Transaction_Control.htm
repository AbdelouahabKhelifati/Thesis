<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Transaction Control in eXtremeSQL</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/FunctionReference.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Transaction Control in <i>e</i>X<i>treme</i>SQL</h1>
            <blockquote>
                <p>As explained in the <a href="../Core/Transaction_Control.htm"><i>e</i>X<i>treme</i>DB Transaction Control</a> page, a transaction is a unit of work with the database and all database operations must be implemented within a transaction block. By default, <i>e</i>X<i>treme</i>SQL<a name="kanchor856"></a> executes all statements within a single transaction; i.e. the runtime implicitly performs a <b>start transaction</b> then executes the statement and closes the transaction with <b>commit transaction</b>. This is called <i>auto-commit</i>. </p>
                <p>Sometimes it may be desirable or necessary to perform multiple statements within a single transaction. This can be done by explicitly starting and closing (commit or rollback) the transaction.  For example:</p>
                <div class="code-block"><pre>&#160;
    XSQL&gt;create table foo(name string primary key);
    XSQL&gt;start transaction;
    XSQL&gt;insert into foo values ('one');
    XSQL&gt;insert into foo values ('two');
    XSQL&gt;commit transaction;
    XSQL&gt;select * from foo;
    name
    ---------------------------------------------------------------------- 
    one
    two
&#160;
    Selected records: 2
    &#160;</pre>
                </div>
                <p>When performing a series of operations in a single transaction, it may be necessary to access a database object newly inserted, or modified, within the current transaction. This requires that all indexes in which the object participates be updated. Normally indexes are updated during the <b>commit transaction</b> operation. But when necessary, it is possible to update the indexes prior to the <b>commit transaction</b> by explicitly calling a <b>checkpoint transaction</b> method.  For example:</p>
                <div class="code-block"><pre>&#160;
    XSQL&gt;start transaction;
    XSQL&gt;insert into foo values ('three');
    XSQL&gt;select * from foo;
    name
    ---------------------------------------------------------------------- 
    one
    two
&#160;
    Selected records: 2
    XSQL&gt;checkpoint transaction;
    XSQL&gt;select * from foo;
    name
    ---------------------------------------------------------------------- 
    one
    two
    three
&#160;
    Selected records: 3
    XSQL&gt;insert into foo values ('four');
    XSQL&gt;commit transaction;
    XSQL&gt;select * from foo;
    name
    ---------------------------------------------------------------------- 
    one
    two
    three
    four
&#160;
    Selected records: 4
    &#160;</pre>
                </div>
                <p>In some APIs, it is possible to enable the <b>autocheckpoint</b> feature to cause all operations to implicitly update the appropriate indexes prior to the <b>commit transaction</b>.</p>
                <h2>Checkpoint</h2>
                <p>When an indexed field is modified by a transaction, the object is removed from all indexes defined for that class. Regardless of the whether the modified field is present in other indexes. Once the object is removed from indexes, there is no way to locate the object based on any search function. The object is put back into the indexes upon the transaction commit. The <b>checkpoint transaction</b> method is the only way to put the object back into indexes within the transaction and thus make it visible to <code>select</code> operations.</p>
                <p>Please note that <b>checkpoint</b> operation is only meaningful in <code><a href="../Core/MVCC_Transaction_Manager.htm" name="kanchor857">MVCC</a></code><a name="kanchor858"></a> transaction manager. <a href="../Core/MURSIW_Transaction_Manager.htm" name="kanchor859">MURSIW</a> allows only a single transaction at a time if it is a write transaction.</p>
                <h2>Autocheckpoint</h2>
                <p> The <b>autocheckpoint</b> feature is different that auto-commit in that it causes all indexes to be updated whenever a database object is <code>inserted</code>, <code>updated</code> or <code>deleted</code>. So the current state of the database is available to other operations within the same transaction. These index updates, and the database objects to which they refer, are "temporarily" applied to the database, <i>but are "reversed" if the transaction is rolled back</i>. </p>
                <p>Note that there is a subtle difference between the behavior of <b>autocheckpoint</b> and explicitly calling the <b>checkpoint transaction</b> method. Whereas the <b>autocheckpoint</b> feature affects every insert, update, or delete operation, the <b>checkpoint transaction</b> method affects all insert, update or delete operations so far executed within the transaction.</p>
                <h2>Native Language APIs</h2>
                <p class="BodyParagraph">Please use the links below to view detailed explanations and examples  for your development environment:</p>
                <table class="TableStyle-FunctionReference" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/FunctionReference.css');" cellspacing="0">
                    <col class="TableStyle-FunctionReference-Column-Column2" style="width: 51px;" />
                    <col class="TableStyle-FunctionReference-Column-Column2" />
                    <tbody>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="C_API/Transactions.htm">C</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1"><i>e</i>X<i>treme</i>SQL transaction management in C</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="C++_API/Transactions.htm">C++</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1"><i>e</i>X<i>treme</i>SQL transaction management in C++</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Java_API/Transactions.htm">Java</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1"><i>e</i>X<i>treme</i>SQL transaction management in Java</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Csharp_API/Transactions.htm">C#</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1"><i>e</i>X<i>treme</i>SQL transaction management in C#</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyB-Column2-Body1"><a href="Python_API/Transactions.htm">Python</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyA-Column2-Body1"><i>e</i>X<i>treme</i>SQL transaction management in Python</td>
                        </tr>
                    </tbody>
                </table>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
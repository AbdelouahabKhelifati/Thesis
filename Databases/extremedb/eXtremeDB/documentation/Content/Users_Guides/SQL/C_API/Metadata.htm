<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Programming with eXtremeDB|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Saving eXtremeSQL Database Metadata in C</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Saving <i>e</i>X<i>treme</i>SQL Database Metadata in C</h1>
            <blockquote>
                <p>It is often desirable to open a persistent database that has been created by another application (<span style="color: #000000; font-style: italic; font-weight: normal;">xSQL</span> or an embedded <i>e</i>X<i>treme</i>SQL<a name="kanchor783"></a> application using the C, C++, Java, C# or Python APIs). In order to be able to do so,  the two applications must use the exact same metadata (runtime options, page sizes, devices, database parameters and  dictionary). The C API function <code><a href="../../../Programming/C/Core_Functions/Static/Database_Control/save_metadata.htm">mco_db_save_metadata()</a></code> facilitates this purpose by saving all relevant information.</p>
                <blockquote>
                    <div class="code-block"><pre>    &#160;
    MCO_RET mco_db_save_metadata(void* stream_handle,
                    mco_stream_write output_stream_writer,
                    mco_db_h db,
                    mco_bool save_defaults);
    &#160;</pre>
                    </div>
                </blockquote>
                <p>The first two parameters are the stream handle and the stream writer function (similar to that used with the <code><a href="../../../Programming/C/Core_Functions/Static/Database_Control/save.htm">mco_db_save()</a></code> API), the <code>db</code> argument is the database connection and <code>save_defaults</code> indicates whether to write the parameter's value if that value is the default. (<code>MCO_NO</code> indicates that only the metadata that is different from the defaults are written into the configuration file. In this context the defaults refer to the default values of the database parameters that are normally created through function <code><a href="../../../Programming/C/Core_Functions/Static/Database_Control/params_init.htm">mco_db_params_init()</a></code>.If <code>save_defaults</code> is <code>MCO_YES</code>, than all of the <code>mco_db_params</code> field values - several dozen values - are written into the metadata file).</p>
                <p>The usage is similar to <code><a href="../../../Programming/C/Core_Functions/Static/Database_Control/save.htm">mco_db_save()</a></code>. For example:</p>
                <blockquote>
                    <div class="code-block"><pre>    &#160;
    mco_size_sig_t file_writer(void *stream_handle, const void *from, mco_size_t nbytes)
    {
        return (mco_size_sig_t) fwrite(from, 1, nbytes, (FILE*) stream_handle);
    }
    &#160;
    main() 
    {
        ...
        mco_db_connect(dbName, &amp;db);
        FILE *f = fopen("metadata.cfg", "w");
        if (f)
         {
            mco_db_save_metadata(f, file_writer, db, MCO_YES);
            fclose(f);
        }
        ...
    }
    &#160;</pre>
                    </div>
                </blockquote>
                <p>The metadata is saved  in <code>JSON</code> format. (This metadata can be loaded by <span style="color: #000000; font-style: italic; font-weight: normal;">xSQL</span> from the configuration file as follows:)</p>
                <blockquote>
                    <div class="code-block"><pre>&#160;
    ./xsql -c metadata.cfg
    &#160;</pre>
                    </div>
                </blockquote>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">Â© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
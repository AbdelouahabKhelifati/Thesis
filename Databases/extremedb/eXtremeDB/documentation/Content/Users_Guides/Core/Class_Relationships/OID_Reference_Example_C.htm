<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>OID Reference Example in C</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>OID Reference Example in C</h1>
            <blockquote>
                <p>As explained in the <a href="../Class_Relationships.htm">Class Relationships in C page</a>, <i>e</i>X<i>treme</i>DB provides a number of ways for C developers to implement relationships (joins) between tables, including the Object Id or <code>OID</code> which is available only to the C and C++ APIs. The following “satellite radio receiver” example, demonstrates how an <code>OID</code> can be used to join two classes. This is a special case that can be optimal when the data model contains a reasonable set of data that uniquely identifies the principal object.</p>
                <h3>Example description</h3>
                <p>Consider a hypothetical application, a satellite radio receiver. The receiver will process two types of broadcast data objects: “program data” that consist of individual program information such as a title, narrator, content description and program description, and “program schedule” that consist of schedule time data such as the schedule start time and duration, a number of time slots within the schedule, each with their start time and duration, and a reference to the “program data” that describes the program for that time slot. Program information transmission is organized in a data stream that consists of objects of both types. Program schedule and program data information can arrive in any order. It is possible that a schedule for a program would be placed ahead of program data in the stream.</p>
                <p>The receiver application should keep all the programming information from the current time forward up to a number of hours, and be able to link each program to the time slot the program airs. It should replace schedules and program data in the database as the old ones become obsolete and the new ones arrive. There are certain performance considerations—data must be written into the database quickly enough to keep up with the transmission. Each data object received by our receiver is assigned a unique identifier that is also broadcast by the satellite.</p>
                <p>The pseudo-code below describes the data:</p>
                <div class="code-block"><pre>&#160;
    ProgramData 
    {
        Object ID;
        TitleSize;
        Title;
        NarratorSize;
        Narrator;
        &#160;
        For(I = 0;I &lt; MaxDescriptions;I++)
        {
            ContentDescriptionText | ProgramDescriptionText
        }
    };
    &#160;
    ProgramSchedule 
    {
        StartTime;
        Duration;
        NumberOfTimeSlots;
&#160;
        For(I = 0; I &lt; NumberOfTimeSlots; I++)
        {
            SlotStartTime;
            SlotDuration;
            Program_data_ID;
        }
    };
    &#160;</pre>
                </div>
                <h3>Solution Design</h3>
                <p>Following object-oriented design methodology, it is appropriate to introduce two classes that correspond to real-life objects: classes <i>ProgramData</i> and <i>ProgramSchedule</i>. The <i>ProgramData</i> objects always have <code>Title</code> and <code>Narrator</code> fields, while <code>ProgramDescriptionText</code> or <code>ContentDescriptionText</code> may or may not be present for a particular program. In <i>e</i>X<i>treme</i>DB terms, we would declare these fields as <code>optional</code> and, in order to do that, <i>both descriptions must be placed in structures</i>. There are no data structures shared by both classes. The <i>ProgramData</i> class will be declared with an <code>oid</code> so we can reference a program from the appropriate time slot. Each <i>ProgramSchedule</i> object has an array of time slots that will be implemented as a <code>vector</code>. It is also desirable to sort schedules chronologically, so a <code>tree</code> index based on the schedule’s start time will be declared.  There is no need to keep the <code>oid</code> of the <i>ProgramSchedule</i>, even though it is available to us. The only association between the two classes is via a <code>reference</code> to a program put into the time slot.</p>
                <p>In a C or C++ project, this real-world data stream could be formalized with the following <i>e</i>X<i>treme</i>DB schema:</p>
                <div class="code-block"><pre>&#160;
    struct ProgId
    {
        uint4 id;  // this will hold the transponder-provided object ID
    };
&#160;
    declare database GuideDb;
    declare oid      ProgId[5000];
&#160;
    struct ContentDescription
    {
        string Text;
    };
    &#160;
    struct ProgramDescription
    {
        string Text;
    };
&#160;
    class ProgamData
    {
        string   Title;
        string   Narrator;
        optional ContentDescription CText;
        optional ProgramDescription PText;
        &#160;
        list;
        oid;
    };
&#160;
    struct TimeSlot
    {
        uint4 StartTime;
        uint2 Duration;
&#160;
        ref   pId; // a reference to the ProgramData object
    };
&#160;
    class ProgramSchedule 
    {
        uint4 StartTime;
        uint2 Duration;
&#160;
        // within the duration of this schedule, there can be
        // an arbitrary number of time_slots, so we use a vector
        vector	&lt;TimeSlot&gt; Slot;
        &#160;
        // to quickly locate the program info for a schedule,
        // or to retrieve the schedule by ascending StartTime, we use an
        // index
        tree &lt;StartTime&gt; iStartTime;
    };
    &#160;</pre>
                </div>
                <p>&#160;</p>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
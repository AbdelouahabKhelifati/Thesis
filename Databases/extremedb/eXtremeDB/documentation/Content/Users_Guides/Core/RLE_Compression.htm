<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>RLE Compression</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>RLE Compression</h1>
            <blockquote>
                <p>Another form of optimization with <code><a href="Sequences.htm">sequences</a></code> is to use the implementation of RLE (Run Length Encoding) compression. Here instead of storing “raw” sequences, repeating values are stored with a value and repeat count. On sequences with many duplicate elements RLE exhibits better performance and reduces storage requirements. For example, if  x = {1,1,1,1,1,1,1,1,1,1}, and y = {2,2,2,2,2,2,2,2,2,2}, to calculate x+y it is only necessary to do one addition instead of 10 as when the raw sequence is stored.</p>
                <p><a name="kanchor610"></a>A strong advantage of RLE is better use of the runtime stack. With the non-compressed implementation the number of elements in a tile is predefined and is the same for all data types – eg. 100 integers or 100 doubles. This is necessary to avoid extra verifications and load on demand while calculating binary expressions (operators). With compression enabled these verifications must be performed regardless, so the tile can be loaded with 200 integers or doubles.</p>
                <p>The downside of using RLE is that the implementation requires more complicated logic, which negatively affects performance when calculating expressions, and requires some unavoidable extra space to keep the counters (an additional byte for each element). So, if the sequence contains predominately unique elements, then the non-compressed implementation performs better.</p>
                <p>For applications that make use of sequences with duplicates, especially securities data, RLE will be beneficial. Virtually all vertical data storage systems (Vertica, SciDB, Vectorwise, etc.) use compression since one or another implementation of a compression is much more effective over a vertical data layout than it is over horizontal. While working with various benchmarks, it has been our experience that intraday prices don't change very often; it’s very likely that there will be many duplicates.</p>
                <p>The RLE implementation is in a different library (target/mcoseqrle) than the non-compression implementation. So, the application is almost completely independent of the <code>sequence</code> storage implementation. It is "almost" independent because, though the API is the same, the tiles returned by the RLE function calls contain extra counters; so if the application makes use of these tiles this has to be accounted for. Specifically, in the C API, the non-compression tile processing code looks something like this:</p>
                <div class="code-block"><pre>&#160;
    while ( close_iterator.next(&amp;close_iterator) == MCO_S_OK ) 
    {
        mco_size_t i, tile_size = close_iterator.tile_size;
        for (i = 0; i &lt; tile_size; i++) 
        {
            close_sum += close_iterator.tile.arr_float[i];
        }
    }
    &#160;</pre>
                </div>
                <p>When RLE is used, the same code would look like:</p>
                <div class="code-block"><pre>&#160;
    while (close_iterator.next(&amp;close_iterator) == MCO_S_OK) 
    {
        mco_size_t i, tile_size = close_iterator.tile_size;
        for (i = 0; i &lt; tile_size; i++) 
        {
            close_sum +=  close_iterator.tile.arr_float[i] * MCO_SEQ_RLE_COUNT(iterators.close.tile, i);
        }
    }
    &#160;</pre>
                </div>
                <p>Note that in actual practice both of the code fragments above would rarely be used, as the <code>mco_seq_add()</code> function calculates the sum more conveniently and many other aggregate functions operate directly on <code>sequence</code> data (see <a href="../Server/Analytics_Function_Library.htm">Statistical Function Library</a> for examples), applications will seldom (if ever) use tiles directly.</p>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Incremental Backup and Restore</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/FunctionReference.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Incremental Backup and Restore</h1>
            <blockquote>
                <p>As explained in the <a href="../Database_Backup_Restore.htm">Database Backup and Restore</a> page, <i>e</i>X<i>treme</i>DB provides incremental backup and restore APIs for both in-memory and persistent databases as well as a <a href="File_Backup.htm">file backup</a> capability <i>for persistent databases</i>. (Please see the <a href="File_Backup.htm">File Backup</a> page for further details.)</p>
                <p>An incremental backup can be either a full snapshot of the entire database (backup type FULL) or an incremental (partial image) of the database containing only differences in the database content between two consecutive backup records (backup type INCREMENTAL). Note that a FULL backup (snapshot) must be done at least once before an INCREMENTAL backup can be done successfully. If backup type AUTO is specified a FULL  or INCREMENTAL  record will be created depending on the content of the backup file. If there is no snapshot in the file yet the backup process will create one; otherwise a partial backup record is created.</p>
                <p><a name="kanchor994"></a>Incremental backup must be enabled by the application at runtime and this introduces minimal additional overhead as the <i>e</i>X<i>treme</i>DB runtime tracks all modifications to the database by saving the modified pages. The next call for a backup has all the necessary information to make an incremental backup record that contains only the pages that were changed since the previous backup. For example, if an application creates only a couple of objects (instances of database classes) in between of two backups, the incremental backup record will contain only some data pages, so-called "backup clusters", containing the modified pages and some affected data. The incremental backup procedure does not block normal database processing. The <i>e</i>X<i>treme</i>DB runtime tracks all modifications in the background. Then the backup procedure simply scans those modification markers and copies the content of the data pages without affecting transaction processing or blocking indexes.</p>
                <p>An incremental backup can be run in synchronous or asynchronous mode.</p>
                <h2>Recommended Practice</h2>
                <p>To assure that a database can be restored with minimal loss of data it is important to do a full backup (snapshot) when the database has sufficient initial contents; then perform regular incremental backups at appropriate intervals. The backup procedure can be run from a dedicated task or process. In pseudo code the procedure could be as follows: </p>
                <div class="code-block"><pre>&#160;
    connect to the database 
    while (!stop)
    {
        backup( connection, file, label )
        sleep with appropriate granularity
    } 
    disconnect from the database
    &#160;</pre>
                </div>
                <p>This code will produce a number of the database backups until the <code>stop</code> variable is set by some external logic. Later it will be possible to restore the database when necessary. The code above may be run as a dedicated task in the main database application, as a separate process or even as a batch file using <span style="color: #000000; font-style: italic; font-weight: normal;">xSQL</span> to control the database.</p>
                <p>To restore the database, the procedure could be as follows:</p>
                <div class="code-block"><pre>&#160;
    create the database
    connect to the database
    restore( connection, file, label )
    perform normal database operations
    disconnect from the database
    &#160;</pre>
                </div>
                <p>Once restored, the backup cycle should then be run to produce more backups.</p>
                <h3>Notes on database backup</h3>
                <blockquote>
                    <p>1. The size of the backup file could be equal to or exceed the actual size of the database. This is because backup frames contain overhead -- the increments can be larger than the actual size of modified data.</p>
                    <p>2. While the database is being backed up, it is available for both read and write operations with the exception of the short period of time at the end of the backup process. At the end of each backup, the database is locked and becomes unavailable for updates. This is transparent to applications; a write transaction would wait for the database to become available. </p>
                    <p>3. The restore from a backup requires exclusive access to the database.</p>
                    <p>4. The backup protocol maintains database integrity and does not allow restoring the database from an out-of-order backup.</p>
                </blockquote>
                <h2>Native Language APIs</h2>
                <p>The incremental backup/restore APIs are specific to the application language. Please use the links below to view detailed explanations and examples  for your development environment:</p>
                <table class="TableStyle-FunctionReference" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/FunctionReference.css');" cellspacing="0">
                    <col class="TableStyle-FunctionReference-Column-Column2" style="width: 61px;" />
                    <col class="TableStyle-FunctionReference-Column-Column2" />
                    <tbody>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Inc_Backup_Restore_C.htm">C</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Incremental backup/restore in C</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Inc_Backup_Restore_Cpp.htm">C++</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Incremental backup/restore in C++</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Inc_Backup_Restore_SQL.htm">SQL</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Incremental  backup/restore using SQL</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyB-Column2-Body1"><a href="Inc_Backup_Restore_xSQL.htm">xSQL</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyA-Column2-Body1">Incremental  backup/restore using <span style="color: #000000; font-style: italic; font-weight: normal;">xSQL</span></td>
                        </tr>
                    </tbody>
                </table>
                <p>The other native language APIs (Python, Java and C#) allow incremental backup via the <a href="Inc_Backup_Restore_SQL.htm">SQL statements</a>.</p>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
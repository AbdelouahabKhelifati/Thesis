<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Setting Log File Types and Parameters in C</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <script src="../../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Setting Log File Types and Parameters in C</h1>
            <blockquote>
                <p>As explained in the <a href="../Recovery/Persistent_Recovery_C.htm">persistent database recovery</a> page the <i>e</i>X<i>treme</i>DB<a name="kanchor677"></a> runtime uses the transaction log file to perform recovery automatically in the case of a prior application crash. The <a href="../Persistent_Database_IO.htm">Persistent Database I/O</a><a name="kanchor678"></a> page explains the different log types and how to choose the appropriate type for different application profiles. The manner in which transactions are written to the log is determined by the transaction commit policy. The following sections explain how to set the log type and commit policy in C applications.</p>
                <h2>Log type</h2>
                <p>The log type is specified in the <code><a href="../../../../Programming/C/Structures/Database_Parameters.htm">mco_db_params_t.db_log_type</a></code>. For example:</p>
                <div class="code-block"><pre>&#160;
    mco_db_params_t    db_params;
    ...
    &#160;
    mco_db_params_init ( &amp;db_params );             /* initialize the params with default values */
    &#160;
    // Set log file type
    db_params.db_log_type = UNDO_LOG;
    &#160;</pre>
                </div>
                <p>Note that the valid options for <code>db_log_type</code> are : <code>NO_LOG, REDO_LOG</code> or <code>UNDO_LOG</code>.</p>
                <h2>Commit Policy</h2>
                <p>As explained in the <a href="../Persistent_Database_IO.htm">Persistent Database I/O</a> page, <i>e</i>X<i>treme</i>DB offers four distinct commit policy options for log types <code>REDO_LOG</code> and <code>UNDO_LOG</code>. The application can call function <code>mco_disk_transaction_policy()</code> at runtime with one of the following values: <code>MCO_COMMIT_SYNC_FLUSH, MCO_COMMIT_BUFFERED, MCO_COMMIT_DELAYED,</code> or <code>MCO_COMMIT_NO_SYNC</code>. The commit policy can also be set in <a href="../../../../Programming/C/Structures/Log_Parameters.htm"><code>mco_log_params_t.default_commit_policy</code></a> of the <a href="../../../../Programming/C/Structures/Database_Parameters.htm"><code>mco_db_params_t.log_params</code></a> parameter passed to <code><a href="../../../../Programming/C/Core_Functions/Static/Database_Control/open_dev.htm">mco_db_open_dev()</a></code>. </p>
                <p>The <code>MCO_COMMIT_NO_SYNC</code> policy causes all transactions to be held in the cache until the application explicitly forces the cache to be flushed to the media with the <code><a href="../../../../Programming/C/Core_Functions/Static/Disk_Manager/flush.htm">mco_disk_flush()</a></code> function. </p>
                <p>There are additional parameters  to consider for the <code>REDO_LOG</code> log type. For the  <code>MCO_COMMIT_DELAYED</code><a name="kanchor679"></a> policy, the database disk manager keeps the transaction in memory until a specified percentage of the log file size is reached.  The threshold values <code>mco_log_params_t.redo_log_limit</code>, <code>mco_log_params_t.delayed_commit_threshold</code> and <code>mco_log_params_t.max_delayed_transactions</code> can be set by applications at runtime by calling function <code><a href="../../../../Programming/C/Core_Functions/Static/Disk_Manager/set_log_params.htm">mco_disk_set_log_params()</a></code>. Or these values can be specified in the <a href="../../../../Programming/C/Structures/Database_Parameters.htm"><code>mco_db_params_t.log_params</code></a> parameter passed to <code><a href="../../../../Programming/C/Core_Functions/Static/Database_Control/open_dev.htm">mco_db_open_dev()</a></code>. By default, the threshold is set to be a half of the available page pool size. </p>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">Â© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
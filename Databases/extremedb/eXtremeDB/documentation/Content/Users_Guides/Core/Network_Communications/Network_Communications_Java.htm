<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Programming with eXtremeDB|Native APIs|Java API|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Managing Network Communications in Java</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Managing Network Communications in Java</h1>
            <blockquote>
                <p>As explained in the <a href="../Network_Communications.htm">Network Communications</a> page, <i>e</i>X<i>treme</i>DB release 7.1.1795 and later allow the IPv6 address protocol for specifying node addresses. The following section describes issues that can be important for developers porting applications that used network communications in prior versions of <i>e</i>X<i>treme</i>DB. The <a href="#Enabling">SSL section</a> describes how to enable SSL security for network communications.</p>
                <h2>IPv4 vs. IPv6 issues</h2>
                <p>For developers porting applications built with versions of <i>e</i>X<i>treme</i>DB prior to release 7.1.1795 the following API changes should be noted: </p>
                <ul>
                    <li value="1">The type of property <i>MasterConnection.ReplicaAddress.</i><i>ip</i> was changed from <code>int</code> to <code>String</code> <![CDATA[ ]]></li>
                    <li value="2">The types of property <i>SqlServer.SessionInfo.peerAddr</i> was changed from <code>int</code> to <code>String</code></li>
                    <li value="3">A new parameter <code>String netInterface</code> was added to <i>SqlServer.OpenParameters</i></li>
                </ul>
            </blockquote>
            <blockquote>
                <p>&#160;</p>
                <h2><a name="Enabling"></a>SSL support</h2>
                <p>To enable SSL support, the application must fill in the <code>SSLParameters</code>. For <i>e</i>X<i>treme</i>DB<i> High Availability</i> the <code>SSLParameters</code> are set in the <i>MasterConnection.Parameters</i> and <i>ReplicaConnection.Parameters</i> classes. For <i style="font-weight: normal;">e</i>X<i style="font-weight: normal;">treme</i>DB <i style="font-weight: normal;">Cluster</i> applications the <code>SSLParameters</code> are set in the <i>ClusterTCPParams</i> class.  (Please refer to the  <a href="OpenSSL_Parameters.htm">SSL Parameters</a> page for details on setting the  values of these parameters.)</p>
                <p>Once the <code>SSLParameters</code> are initialized call the static <i>Database</i> methods <code>sslInit()</code> and <code>sslLoadVerifyLocations()</code>. This must be done after a Database object is created but before the SSL connection is established. </p>
                <p>For example, a Java <i>e</i>X<i>treme</i>DB<i> High Availability</i> master application would look like the following:</p>
                <div class="code-block"><pre>    &#160;
    Database db = new Database(config);
    db.open("windowmst-db", parameters, DATABASE_SIZE);
    &#160;
    MasterConnection con = new MasterConnection(db);
    MasterConnection.Parameters ha_params = new MasterConnection.Parameters();
    ha_params.SSLParameters = new Database.SSLParameters();
    ha_params.SSLParameters.CertificateFile = "../../thlib/certs/client.crt";
    &#160;
    ha_params.SSLParameters.PrivateKeyFile = "../../thlib/certs/client.key";
    &#160;
    // X509_FILETYPE_PEM
    db.sslInit();
    db.sslLoadVerifyLocations(ca_file, ca_path);
    con.setReplicationMode(ha_params);
    &#160;
    // Start listener thread
    Thread listenThread = new Thread(new ThreadStart(Listen));
    listenThread.start();
    &#160;</pre>
                </div>
                <p>And the replica would look like the following:</p>
                <div class="code-block"><pre>    &#160;
    Database db = new Database(config);
    db.open("windowrpl-db", parameters, DATABASE_SIZE);
    &#160;
    ReplicaConnection con = new ReplicaConnection(db);
    &#160;
    ReplicaConnection.Parameters replParams = new ReplicaConnection.Parameters();
    replParams.NotifyDelegate = new ReplicaConnection.ReplicaNotifyDelegate(notifier);
    replParams.SSLParameters = new Database.SSLParameters();
    replParams.SSLParameters.CertificateFile = "../../thlib/certs/client.crt";
    replParams.SSLParameters.PrivateKeyFile = "../../thlib/certs/client.key";
    &#160;
    // X509_FILETYPE_PEM
    db.sslInit();
    db.sslLoadVerifyLocations(ca_file, ca_path);
    &#160;
    // Attach to master. Analog of mco_nw_attach_master
    con.attachMaster(connectString, replParams, CONNECT_TIMEOUT);
    &#160;</pre>
                </div>
                <p>&#160;</p>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">Â© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Uniform Database Access</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/FunctionReference.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Uniform Database Access </h1>
            <blockquote>
                <p><a name="kanchor14"></a>The Uniform Database Access (UDA) API allows C and C++ applications to bypass the native, generated, API and use a pre-defined generic navigational API to access the database.</p>
                <h2>How it Works</h2>
                <p>The database dictionary generated by the <code><a href="../../Getting_Started/Package_Contents/mcocomp.htm">mcocomp</a></code> schema compiler for all native API calls is coded into the <code>.c</code> output file.  In the output the dictionary is followed by the generated schema-specific type safe API functions.  These comprise the application specific API (<a href="../../Programming/C/Generated.htm">generated</a> API) used by the application developer to access specific fields, indexes and array elements.</p>
                <p>Note that these individual functions all call low level <code>mco_wrapper</code> functions like <code>mco_w_new_obj_oid(), mco_w_obj_delete()</code>, etc.  These wrapper functions provide a “generic” interface to access individual database objects.  However their implementation requires an intimate knowledge of the database dictionary in order to correctly specify the integer values for function parameters. This is the work of the <code><a href="../../Getting_Started/Package_Contents/mcocomp.htm">mcocomp</a></code> compiler.</p>
                <p>The UDA API is designed to provide a similar “generic” interface for applications that does not require intimate knowledge of the database dictionary.  To this end, the UDA <code>registry</code> (Dictionary and Meta-Dictionary) functions provide the means to enumerate fields, indexes and array elements so that the application developer can access them by name.  The integer values returned by the registry functions are then passed to UDA access functions like <code><a href="../../Programming/C/Core_Functions/Static/UDA/uda_new.htm">mco_uda_new()</a></code>, <code><a href="../../Programming/C/Core_Functions/Static/UDA/uda_delete.htm">mco_uda_delete()</a></code>, etc.  Notice that the type-safety provided by the C compiler when using native API calls is sacrificed for the flexibility of these generic UDA access functions.</p>
                <p>Typically, an application developer will build “helper” functions like the following to make calls to the UDA registry functions:</p>
                <div class="code-block"><pre>&#160;
    unsigned short get_field_no(unsigned short struct_no, const char *field_name)
    {
        mco_dict_field_info_t field_info;
        if ( mco_dict_field_name(metadict, 0, struct_no, field_name, &amp;field_info) 
                != MCO_S_OK) 
            return (unsigned short) -1;
            &#160;
        return field_info.field_no;
    }
&#160;
    unsigned short get_struct_no(const char *struct_name)
    {
        mco_dict_struct_info_t struct_info;
        if (mco_dict_struct_name(metadict, 0, struct_name, &amp;struct_info) 
                != MCO_S_OK) 
            return (unsigned short) -1;
            &#160;
        return struct_info.struct_no;
    }
&#160;
    unsigned short get_index_no(const char *struct_name, const char *index_name)
    {
        mco_dict_index_info_t index_info;
        if (mco_dict_index_name(metadict, 0, get_struct_no(struct_name), 
                index_name, &amp;index_info) != MCO_S_OK) 
            return (unsigned short) -1;
        return index_info.index_no;
    }
    &#160;</pre>
                </div>
                <p>With these “helpers” in place, the following code snippet demonstrates calls to the UDA access functions to create and update a database object:</p>
                <div class="code-block"><pre>&#160;
    mco_uda_object_handle_t rec;
    mco_uda_value_t value;
    uint4 key = 1999;
    unsigned short Record_struct_no, key_field_no,
            tkey_index_no, hkey_index_no;
&#160;
    Record_struct_no = get_struct_no("Record");
    key_field_no     = get_field_no(Record_struct_no, "key");
    tkey_index_no    = get_index_no("Record", "tkey");
    hkey_index_no    = get_index_no("Record", "hkey");
    &#160;
    rc = mco_uda_new(t, Record_struct_no, 0, 0, 0, &amp;rec);
    if (MCO_S_OK == rc)
    {
        value.type = MCO_DD_UINT4;
        value.v.u4 = key;
        rc = mco_uda_put(&amp;rec, key_field_no, 0, &amp;value);
    }
    &#160;</pre>
                </div>
                <p>&#160;</p>
                <p>Please use the following links to view the APIs for specific UDA function categories:</p>
                <table class="TableStyle-FunctionReference" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/FunctionReference.css');" cellspacing="0">
                    <col class="TableStyle-FunctionReference-Column-Column2" style="width: 51px;" />
                    <col class="TableStyle-FunctionReference-Column-Column2" />
                    <tbody>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Registry.htm">Registry</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Registry functions</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Fields_and_Indexes.htm">Fields and Indexes</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">UDA Fields and Indexes</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/UDA_Functions.htm">UDA Functions</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">The UDA is a generic API</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Database_Control.htm">Database Control</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Database Open/Close Functions</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Object_Interfaces.htm">Object Interfaces</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Object New/Delete/Checkpoint/Get/Put Functions</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Vector_Functions.htm">Vector</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Vector Functions</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Cursor_Functions.htm">Cursor</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Cursor Functions</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/User_Defined_Indexes.htm">User-defined Indexes</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">User-defined Indexes</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Collation.htm" name="kanchor15">Collation</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Collation implementation </td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="UDA/Programming.htm">Programming</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">UDA Programming technique</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyB-Column2-Body1"><a href="UDA/Sequences.htm">Sequences</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyA-Column2-Body1">UDA support for the <code><a href="Sequences.htm">sequence</a></code> data type</td>
                        </tr>
                    </tbody>
                </table>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
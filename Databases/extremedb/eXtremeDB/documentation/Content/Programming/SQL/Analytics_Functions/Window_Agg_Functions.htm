<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Programming with eXtremeDB|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Window Aggregate SQL Functions</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/FunctionReference.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>Window Aggregate SQL Functions</h1>
            <blockquote>
                <p>Like <i>Grid Aggregate</i> functions, all <i>Window Aggregate</i> functions take an integer <i>interval</i> argument and produce a result sequence containing the calculated aggregate for each interval.  The difference in how <i>Window Aggregate</i> functions determine their <i>sliding window</i> interval is described in the <a href="../../Common/Analytics/Window_v_Grid_Agg_Functions.htm">Window versus Grid Aggregate</a> page. The result of all <i>Window Aggregate</i> functions is returned in the result sequence as the calculated aggregate for each interval. As with <i>Grid Aggregate</i> functions, the object's sequence is split into intervals based on the value of the <i>interval</i> argument  which determines the maximum number of elements in the group, though there may be fewer. So the input sequence will be divided into blocks of interval elements on which the operation is performed.</p>
                <table class="TableStyle-FunctionReference" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/FunctionReference.css');" cellspacing="0">
                    <col class="TableStyle-FunctionReference-Column-Column2" style="width: 267px;" />
                    <col class="TableStyle-FunctionReference-Column-Column2" />
                    <tbody>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_max( input, interval )</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>maximum</b> value for each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_min( input, interval )</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence  with the <b>minimum</b> value for each window of elements </td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_sum( input, interval )</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence  with the <b>sum</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_avg( input, interval )</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>average</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_var( input, interval )</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>variance</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1">seq_window_agg_var_samp( input, interval)</td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>sample variance</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Max_Min_Sum_Avg_Var_Dev.htm">seq_window_agg_dev( input, interval)</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>standard deviation</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1">seq_window_agg_dev_samp( input, interval)</td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>sample standard deviation</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyE-Column2-Body1"><a href="Window_Agg/SQL_Agg_Ema.htm">seq_window_agg_ema( input, interval)</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyD-Column2-Body1">Returns the   sequence with the <b>exponential moving average</b> of each window of elements</td>
                        </tr>
                        <tr class="TableStyle-FunctionReference-Body-Body1">
                            <td class="TableStyle-FunctionReference-BodyB-Column2-Body1"><a href="Window_Agg/SQL_ATR.htm">seq_window_agg_atr(...)</a>
                            </td>
                            <td class="TableStyle-FunctionReference-BodyA-Column2-Body1">Returns the   sequence with the <b>average true range</b> for each window of elements</td>
                        </tr>
                    </tbody>
                </table>
                <h2>Example</h2>
                <p>As explained in <a href="../../../Users_Guides/Server/Analytics_Functions/Examples.htm">Analytics Functions Library Examples</a> page, the data in the following example is taken from historical values from 2013 for IBM. The data is loaded into <span style="color: #000000; font-style: italic; font-weight: normal;">xSQL</span> by running various scripts in directory <code>samples/xsql/scripts/financial</code>. To reproduce the example below run the <code>g.bat</code> (or g<code>.sh</code> on Linux systems) specifying the example number 8. For instance, with <code>scripts/financial</code> as the current working directory, simply type:</p>
                <div class="code-block"><pre>    &#160;
    g 8
    &#160;</pre>
                </div>
                <p>Following is an example code snippet demonstrating some of the <code>grid_agg()</code>functions for the first quarter of 2013. Note that the <code>interval</code> argument is specified to give intervals of 7. Since the number of <i>Quote</i> records in Q1 is 12, this produces result sequences of 12 elements due to  the "sliding blocks of 7" (please see the <a href="../../Common/Analytics/Window_v_Grid_Agg_Functions.htm">Window v Grid Aggregate Functions</a> page for further details).</p>
                <div class="code-block"><pre>        &#160;
    -- Show volumes for Q1 2013
    SELECT symbol, seq_search(day, 20130101, 20130331) as Q1_13,
        volume@Q1_13 as "Volume_Q1_13"
    FROM Quote WHERE symbol = 'SYM0';
    &#160;
    symbol  
    Q1_13{}  
    Volume_Q1_13{}
    -------------------------------------------------------------------------
    SYM0    
    {20130101, 20130104, 20130106, 20130110, 20130123, ...&lt;2 element(s)&gt;..., 
      20130213, 20130214, 20130216, 20130311, 20130326} 
         {335, 808, 45, 402, 732, ...&lt;2 element(s)&gt;..., 450, 385, 420, 367, 69}
    &#160;
&#160;
    -- _max, _min, _sum, _avg, _var, _dev
            
    SELECT symbol, seq_search(day, 20130101, 20130331) as Q1_13,
        volume@Q1_13 as "Volume_Q1_13",
        seq_window_agg_max(volume@Q1_13, 7) as "max_Q1_13",
        seq_window_agg_min(volume@Q1_13, 7) as "min_Q1_13",
        seq_window_agg_sum(volume@Q1_13, 7) as "sum_Q1_13",
        seq_window_agg_avg(volume@Q1_13, 7) as "avg_Q1_13",
        seq_window_agg_var(volume@Q1_13, 7) as "var_Q1_13",
        seq_window_agg_dev(volume@Q1_13, 7) as "dev_Q1_13"
    FROM Quote WHERE symbol='SYM0';
    &#160;
    symbol  
    Q1_13{} 
      Volume_Q1_13{} 
       max_Q1_13{} 
          min_Q1_13{} 
          sum_Q1_13{}       
    avg_Q1_13{} 
          var_Q1_13{} 
          dev_Q1_13{}
    -------------------------------------------------------------------------
    SYM0    
    {20130101, 20130104, 20130106, 20130110, 20130123, ...&lt;2 element(s)&gt;..., 
      20130213, 20130214, 20130216, 20130311, 20130326} 
         {335, 808, 45, 402, 732, ...&lt;2 element(s)&gt;..., 450, 385, 420, 367, 69}  
    {335, 808, 808, 808, 808, ...&lt;2 element(s)&gt;..., 808, 805, 805, 805, 805} 
           {0, 0, 0, 0, 0, ...&lt;2 element(s)&gt;..., 45, 45, 48, 48, 48}       
    {335, 1143, 1188, 1590, 2322, ...&lt;2 element(s)&gt;..., 3290, 2867, 3242, 3207, 2544}       
    {47.8571428571429, 163.285714285714, 169.714285714286, 227.142857142857, 331.714285714286, 
      ...&lt;2 element(s)&gt;..., 470, 409.571428571429, 463.142857142857, 458.142857142857, 363.428571428571}   
    {13741.8367346939, 82636.2040816327, 80784.7755102041, 81080.1224489796, 99185.9183673469, 
      ...&lt;2 element(s)&gt;..., 94120.8571428571, 75180.8163265306, 53338.9795918367, 54100.4081632653, 56048.8163265306}
    {117.225580547481, 287.465135419293, 284.226627025344, 284.745715418125, 314.937959552905, 
      ...&lt;2 element(s)&gt;..., 306.791227291227, 274.191203955434, 230.952331860574, 232.594944406075, 236.74631217092}
    &#160;
&#160;
    -- _ema (Exponential Moving Average)
            
    SELECT symbol, seq_search(day, 20130101, 20130331) as Q1_13,
        volume@Q1_13 as "Volume_Q1_13",
        seq_window_agg_ema(volume@Q1_13, 7) as "ema_Q1_13"
    FROM Quote WHERE symbol='SYM0';
    &#160;
    symbol  
    Q1_13{} 
      Volume_Q1_13{} 
       ema_Q1_13{}
    -------------------------------------------------------------------------
    SYM0 
       {20130101, 20130104, 20130106, 20130110, 20130123, ...&lt;2 element(s)&gt;..., 
    20130213, 20130214, 20130216, 20130311, 20130326}      
    {335, 808, 45, 402, 732, ...&lt;2 element(s)&gt;..., 450, 385, 420, 367, 69}  
    {335, 453.25, 351.1875, 363.890625, 455.91796875, ...&lt;2 element(s)&gt;..., 
      462.527893066406, 443.145919799805, 437.359439849854, 419.76957988739, 332.077184915543}
    &#160;</pre>
                </div>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>
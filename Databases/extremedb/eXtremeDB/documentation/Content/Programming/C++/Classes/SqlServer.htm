<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="extremedb.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Programming with eXtremeDB|Native APIs|C++ API|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>The C++ SqlServer Class</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/KB_Style.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/IndentedFunctionReference.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="7" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">ToC path: </span>
                </div>
            </div>
            <h1>The C++ <i>SqlServer</i> Class</h1>
            <blockquote>
                <p>The <i>SqlServer</i> class executes client SQL requests.</p>
                <h3>For an overview see page <a href="../Cpp_Classes.htm">C++ Classes</a></h3>
                <p>The <i>SqlServer</i> methods  are described  in the table below. </p>
                <table class="TableStyle-IndentedFunctionReference" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/IndentedFunctionReference.css');" cellspacing="0">
                    <col class="TableStyle-IndentedFunctionReference-Column-Column1" style="width: 388px;" />
                    <col class="TableStyle-IndentedFunctionReference-Column-Column2" style="width: 464px;" />
                    <tbody>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">
                                <p style="font-weight: normal;"><b>SqlServer</b>(McoSqlEngine* engine, int port, </p>
                                <p style="font-weight: normal;">size_t bufferSize = 64 * 1024,
                  size_t nThreads = 8,</p>
                                <p style="font-weight: normal;">int listenQueueSize = 5, error_handler_t handler = NULL,</p>
                                <p style="font-weight: normal;">bool localDomain = false,
                  void* sslParameters = NULL, 
                            </p>
                                <p style="font-weight: normal;">bool authenticationRequired = false,
                            </p>
                                <p style="font-weight: normal;">int interruptTimeout = 100, </p>
                                <p style="font-weight: normal;">int compressionLevel = 0);
                            </p>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">
                                <p>Constructor of the SQL server; the arguments are defined as follows</p>
                                <table class="TableStyle-IndentedFunctionReference" style="mc-table-style: url('../../../Resources/TableStyles/IndentedFunctionReference.css');margin-left: 0;margin-right: auto;" cellspacing="0">
                                    <col class="TableStyle-IndentedFunctionReference-Column-Column1" />
                                    <col class="TableStyle-IndentedFunctionReference-Column-Column2" />
                                    <tbody>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">engine</td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The local <i><a href="McoSqlEngine.htm">McoSqlEngine</a></i> instance</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">port</td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The server port</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">bufferSize </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The size of the transfer buffer. Results of client query execution will be placed
         in this buffer. If the result data source can not fit into the buffer then the query result will be
         delivered to the client in parts. In this case a transaction lock is kept until all
         the results are sent to the client.</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">nThreads </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The optimal number of threads spawned by server. The server will spawn as many threads
         as client requests arrives. Each thread processes requests from the client until
         the client closes the connection. After this the thread is return to the pool of idle threads or
         is terminated if the number of threads exceeds the optimal number specified.</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">listenQueueSize </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The paremeter of the socket listen function; means the maximal number of
         connections that can be concurrently accepted by the server</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">handler </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">An optional error handler</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">localDomain </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Indicates that Unix Domain Socket instead of networked TCP socket is used for RSQL communication <i>which is possible only when server and client are on the same host</i></td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">sslParameters </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">A pointer to a <code><a href="../../C/Structures/SSL_Parameters.htm">mco_ssl_params_t</a></code> structure containing SSL connection settings</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">authenticationRequired </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Indicates whether authentication is required for clients</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">interruptTimeout </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">The period in milliseconds to poll the interrupts from the client(s). If 0, disable interruption</td>
                                        </tr>
                                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                                            <td class="TableStyle-IndentedFunctionReference-BodyB-Column1-Body1">compressionLevel </td>
                                            <td class="TableStyle-IndentedFunctionReference-BodyA-Column2-Body1"><span style="font-size: 9pt;">Compression level: 0 = no compression, 1 = best speed, 9 - best compression. Default value is 0</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p><![CDATA[     ]]></p>
                            </td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1"><b>SqlServer</b>(const OpenParameters &amp;params);</td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">
                                <p>This constructor instantiates the server with the arguments specified in the <i>OpenParameters</i> structure defined as follows (the meanings of these arguments are defined in the constructor above):</p>
                                <div class="code-block"><pre>  &#160;
  struct OpenParameters {
    McoSqlEngine   *engine;
    int             port;
    size_t          bufferSize;
    size_t          nThreads;
    int             listenQueueSize;
    error_handler_t handler;
    bool            localDomain;
    void          * sslParameters;
    bool            authenticationRequired;
    int             interruptTimeout;
    const char     *netInterface;
    int             nGcThreads;
    int             gcPeriod;
    OpenParameters(McoSqlEngine *eng, int p) : 
      engine(eng), port(p), 
      bufferSize(64 * 1024),
       nThreads(8), 
      listenQueueSize(5), 
      handler(0),
       localDomain(false), 
      sslParameters(0), 
      authenticationRequired(false), 
      interruptTimeout(100), 
      netInterface(0), 
      nGcThreads(0), 
      gcPeriod(100) {}
  };
  &#160;</pre>
                                </div>
                            </td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1"><b> void start();</b>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Starts the server; opens a socket at the specified port and
   accepts client connection requests</td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1"><b>  void stop();</b>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Stops the server; stops accepting connection requests and closes the server socket</td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">
                                <p><b>void getSessionsInfo</b>(session_info_handler_t handler,</p>
                                <p> void* context = NULL);</p>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Enumerates sessions in a wait state followed by active sessions</td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">
                                <p><b>void regSessionEvent</b>(session_info_handler_t handler, </p>
                                <p>void* context = NULL);</p>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Registers a callback to receive new session start \ stop events</td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyE-Column1-Body1">
                                <p><b>void regQueryInfoEvent</b>(query_info_handler_t handler, </p>
                                <p>void* context = NULL);</p>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyD-Column2-Body1">Registers a callback to receive query statistic events</td>
                        </tr>
                        <tr class="TableStyle-IndentedFunctionReference-Body-Body1">
                            <td class="TableStyle-IndentedFunctionReference-BodyB-Column1-Body1"><b>~SqlServer();</b>
                            </td>
                            <td class="TableStyle-IndentedFunctionReference-BodyA-Column2-Body1">Destructor</td>
                        </tr>
                    </tbody>
                </table>
            </blockquote>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="copyright" style="font-size: 8pt;"><a href="../../../Copyright_Notice.htm" title="Copyright Notice" alt="Copyright Notice">© 2001-2019 McObject LLC. All rights reserved</a>.</p>
            <p class="copyright" style="font-size: 8pt;">&#160;</p>
            <p class="copyrightFeedback" style="font-size: 8pt;"><a href="mailto:Support@McObject.com?subject=Online Documentation feedback">Send feedback</a> <span style="color: #000000;">on this topic to McObject. </span></p>
        </div>
    </body>
    <script id="MCO-LINKS">/* <![CDATA[ */
		(function(){
		var isFramed = false;
		try {
		isFramed = window != window.top || document != top.document || self.location != top.location;
		} catch (e) {
		isFramed = true;
		}
		if (!isFramed) {
		var link1 = document.createElement('a');
		link1.setAttribute('href','#');
		link1.setAttribute('id','back-id');
		link1.setAttribute('title','Go back');
		link1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M0 0h24v24H0z" fill="none" /><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></svg>';
		var link2 = document.createElement('a');
		link2.setAttribute('href','/');
		link2.setAttribute('title','Go to mcobject.com');
		link2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var link3 = document.createElement('a');
		link3.setAttribute('href','/docs/extremedb.htm');
		link3.setAttribute('title','Go to table of content');
		link3.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#555555"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /><path d="M0 0h24v24H0z" fill="none" /></svg>';
		var el = document.createElement('div');
		el.style.cssText = 'position:fixed;display:flex;flex-direction:column;right:16px;top:8px;background:#f7f7f7;box-shadow:4px 4px 4px #777777;padding:4px 8px;';
		el.appendChild(link1);
		el.appendChild(link2);
		el.appendChild(link3);
		document.body.append(el);
		document.querySelector('#back-id').addEventListener('click',function(e){e.preventDefault(); window.history.back();});
		}
		})();
	/* ]]> */</script>
</html>